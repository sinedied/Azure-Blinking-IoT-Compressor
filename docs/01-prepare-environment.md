---
title: 1. PrÃ©paration
---
# PrÃ©parez votre environnement

Afin de rÃ©aliser ce workshop, vous aurez besoin de deux Ã©lÃ©mÃ©nts : 

- Une souscription Ã  Azure,
- Un ensemble d'outils, et notamment Visual Studio Code, afin d'Ã©crire et 
de dÃ©ployer du code Ã  la fois sur un objet IoT et sur le cloud.

::: danger Attention
Si vous lisez ce workshop sans Ãªtre accompangÃ© d'un employÃ© Microsoft, certaines parties du workshop ne seront pas 
rÃ©alisables dans cet ordre. Nous sommes en train de prÃ©parer une nouvelle version qui vous permettra de le rÃ©aliser.
:::

## Configurer son compte Azure

Il existe diffÃ©rentes maniÃ¨res d'obtenir un abonnement Ã  Microsoft Azure. 
Cet abonnement est nÃ©cessaire afin de crÃ©er les ressources Azure pour ce workshop.
La majoritÃ© des ressources utilisÃ©es le seront dans les limites des tiers gratuits, 
il se peut cependant que des frais soient occasionnÃ©s en suivant ce workshop.

Afin de vous aider Ã  crÃ©er votre compte Azure, choisissez l'option qui 
correspond le mieux Ã  votre situation :

- [J'ai dÃ©jÃ  un abonnement](#j-ai-deja-un-abonnement-azure)
- [Je suis Ã©tudiant](#je-suis-etudiant)
- [Je suis un abonnÃ© MSDN/Visual Studio](#je-suis-un-abonne-visual-studio-msdn)
- [J'ai un Azure Pass](#un-employe-microsoft-m-a-communique-un-azure-pass)
- [Je n'ai rien de tout cela](#je-n-ai-rien-de-tout-cela)


### J'ai dÃ©jÃ  un abonnement Azure

C'est une excellente nouvelle ! Il faudra toutefois veiller Ã  vÃ©rifier que vous avez les autorisations nÃ©cessaires
afin de pouvoir crÃ©er des ressources sur cet abonnement. 

Vous pouvez maintenant [vÃ©rifier si tout est prÃªt pour la prochaine Ã©tape](#âœ…-verifions-si-votre-compte-azure-a-bien-ete-cree).

### Je suis Ã©tudiant

En tant qu'Ã©tudiant, vous avez probablement accÃ¨s Ã  l'offre **Azure For Students**.
Pour le savoir, rendez-vous sur la [page dÃ©diÃ©e][azure-student], et cliquez sur **Activate Now**.
On vous demandera alors de confirmer vos informations personnelles, ainsi que votre numÃ©ro de tÃ©lÃ©phone afin de recevoir
un SMS de validation.

::: warning Attention
Si, Ã  un moment dans le parcours d'inscription, vos informations de carte bleue vous sont demandÃ©es, 
c'est probablement qu'il y a eu une erreur dans le parcours.
:::

Il se peut que votre portail Ã©tudiant vous amÃ¨ne directement sur le portail Azure, sans toutefois avoir de souscription
Azure. Dans ce cas, recherchez "Education" dans la barre de recherche en haut Ã  droite. Sur cette page Ã©ducation,
cliquez sur le bouton **Claim your Azure credit now** afin de dÃ©marrer le processus de crÃ©ation d'abonnement.
![](./img/student-1.png)

Dans le cas oÃ¹ votre Ã©tablissement d'enseignement ne serait pas reconnu, vous pouvez toujours 
[crÃ©er un abonnement d'essai](#nothing).

Vous pouvez maintenant [vÃ©rifier si tout est prÃªt pour la prochaine Ã©tape](#âœ…-verifions-si-votre-compte-azure-a-bien-ete-cree).

### Un employÃ© Microsoft m'a communiquÃ© un _Azure Pass_

Vous Ãªtes sur un Ã©vÃ©nement et un employÃ© vous a communiquÃ© un code _Azure Pass_? Dans ce cas
vous pouvez l'utiliser afin de crÃ©er un abonnement. Avant de dÃ©marrer, assurez-vous : 

- d'avoir un compte Microsoft (anciennement Live). Vous pouvez en crÃ©er un sur [account.microsoft.com](https://account.microsoft.com),
- que ce compte n'a jamais Ã©tÃ© utilisÃ© pour un autre abonnement Azure. Si vous avez dÃ©jÃ  eu un compte d'essai ou payant
avec la mÃªme adresse, il vous sera alors impossible d'utiliser l'Azure Pass.

::: warning Attention
Si, Ã  un moment dans le parcours d'inscription, vos informations de carte bleue vous sont demandÃ©es, 
c'est probablement qu'il y a eu une erreur dans le parcours. Demandez de l'aide Ã  l'employÃ© Microsoft.
:::

1. Rendez-vous sur [microsoftazurepass.com][azurepass] et cliquez sur **Start**,
![DÃ©marrer l'utilisation du pass](./img/redeempass-1.jpg)
2. Connectez vous avec un compte Microsoft Live **Vous devez utiliser un compte Microsoft qui n'est associÃ© Ã  aucune
 autre souscription Azure**
3. VÃ©rifiez l'email du compte utilisÃ© et cliquez sur **Confirm Microsoft Account**
![Confirmer le compte](./img/redeempass-2.jpg)
4. Entrez le code que nous vous avons communiquÃ©s, puis cliquez sur **Claim Promo Code** (et non, le code prÃ©sent sur la
 capture d'Ã©cran n'est pas valide ;) ),
![Indiquer son code](./img/redeempass-3.jpg)
5. Nous validons votre compte, cela prend quelques secondes
![Validation du code](./img/redeempass-4.jpg)
6. Nous serez ensuite redirigÃ© vers une derniÃ¨re page d'inscrption. Remplissez les informations, puis cliquez sur **Suivant**
![Entrer les informations](./img/redeempass-5.jpg)
7. Il ne vous restera plus que la partie lÃ©gale: accepter les diffÃ©rents contrats et dÃ©clarations. Cochez les cases que 
vous acceptez, et si c'est possible, cliquez sur le bouton **Inscription**
![Accepter les conditions lÃ©gales](./img/redeempass-6.jpg)

Encore quelques minutes d'attente, et voilÃ , votre compte est crÃ©Ã© ! Prenez quelques minutes afin d'effectuer la 
visite et de vous familiariser avec l'interface du portail Azure.

![Accueil du portail Azure](./img/redeempass-7.jpg)

Vous pouvez maintenant [vÃ©rifier si tout est prÃªt pour la prochaine Ã©tape](#âœ…-verifions-si-votre-compte-azure-a-bien-ete-cree).

### Je suis un abonnÃ© Visual Studio / MSDN

Vous avez accÃ¨s Ã  un crÃ©dit mensuel gratuit dans le cadre de votre abonnement. Si vous ne l'avez pas dÃ©jÃ  activÃ©,
il suffit d'aller sur la [page dÃ©diÃ©e](https://azure.microsoft.com/en-us/pricing/member-offers/credit-for-visual-studio-subscribers/?wt.mc_id=blinkingcompressor-github-chmaneu)
puis de cliquer sur le bouton **activer**.

Vous pouvez maintenant [vÃ©rifier si tout est prÃªt pour la prochaine Ã©tape](#âœ…-verifions-si-votre-compte-azure-a-bien-ete-cree).

### Je n'ai rien de tout cela

Vous pouvez toujours crÃ©er un [abonnement d'essai][azure-free-trial]. Les informations de carte bleue vous seront
demandÃ©es afin de s'assurer que vous Ãªtes une personne physique.

Vous pouvez maintenant [vÃ©rifier si tout est prÃªt pour la prochaine Ã©tape](#âœ…-verifions-si-votre-compte-azure-a-bien-ete-cree).

### âœ… VÃ©rifions si votre compte Azure a bien Ã©tÃ© crÃ©Ã©

Avant de passer Ã  l'Ã©tape suivante, nous allons nous assurer que votre souscription
a bien Ã©tÃ© crÃ©Ã©e. Pour cela, quelques Ã©tapes suffisent : 

1. Rendez-vous sur [le portail Azure][azure-portal],
2. Dans la barre de recherche en haut de la page web, entrez "Subscriptions", puis cliquez sur
l'Ã©lÃ©ment ![](./img/check-01.png)
3. Une liste apparaÃ®t, dans laquelle vous devez avoir un Ã©lÃ©ment avec un status Actif ![](./img/check-02.png)

>La capture d'Ã©cran indique un nom d'abonnement _Azure for Students_. Ce nom
>peut diffÃ©rer en fonction du type d'abonnement Azure, ainsi que de qui l'a crÃ©Ã©.
>Il est en effet possible de rennomer son abonnement avec un nom plus de

**FÃ©licitations**, vous pouvez dÃ©sormais passer au module suivant ğŸ¥³

[azurepass]: https://www.microsoftazurepass.com/?wt.mc_id=blinkingcompressor-github-chmaneu
[azure-portal]: https://portal.azure.com/?feature.customportal=false&wt.mc_id=blinkingcompressor-github-chmaneu
[azure-free-trial]: https://azure.microsoft.com/en-us/free/?wt.mc_id=blinkingcompressor-github-chmaneu
[azure-student]: https://azure.microsoft.com/en-us/free/students/?wt.mc_id=blinkingcompressor-github-chmaneu

## Configurer son environnement de dÃ©veloppement

### Module Azure Functions

Pour le module _DÃ©tectez l'activitÃ© du compresseur avec une Azure Function_, 
il vous sera nÃ©cessaire d'installer les Ã©lÃ©ments suivants sur votre poste de 
dÃ©veloppement: 

- [Visual Studio Code][vscode-home] ainsi que quelques extensions
    - L'extension [Azure Tools][vscode-azureext],
    - Les extensions pour les langages que vous allez utiliser
        - [C#][vscode-csharpext],
        - Python (**3.6** et non pas 3.7)
        - Java
        - JavaScript/NodeJS est dÃ©jÃ  inclus :)

[vscode-home]: https://code.visualstudio.com/?wt.mc_id=blinkingcompressor-github-chmaneu
[vscode-azureext]: https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-node-azure-pack&wt.mc_id=blinkingcompressor-github-chmaneu
[vscode-csharpext]: https://marketplace.visualstudio.com/items?itemName=ms-vscode.csharp&wt.mc_id=blinkingcompressor-github-chmaneu    

### Module _Connectez vos devices IoT au Cloud_

Pour ce module, vous aurez besoin d'un certain nombre de composants. Le MXChip Ã©tant une board Arduino,
il vous faudra installer pas mal de choses. Je vous conseille de lancer l'installation en parallÃ¨le de la rÃ©alisation
du second module. 

- [Visual Studio Code][vscode-home] ainsi que quelques extensions
    - L'extension [Azure IoT tools][vscode-iottoolsext] ([Installer](vscode:extension/vsciot-vscode.azure-iot-tools)), qui contient notamment _IoT Workbench_,
    - L'extension [Arduino][vscode-arduinoext] de l'Ã©diteur Microsoft,
    
- [Arduino IDE][arduino-ide]: il contient les outils de builds et de dÃ©ploiment pour la carte MXChip. **Attention:** Installez la version "standalone", et non pas la version du Store.
- Le driver _ST-Link_: 
	* Windows
	TÃ©lÃ©charger et installer le driver depuis le site [STMicro](http://www.st.com/en/development-tools/stsw-link009.html).

	* macOS
	Pas de driver nÃ©cessaire

	* Ubuntu
  	ExÃ©cuter la commande suivante dans votre terminal, puis dÃ©connectez/reconnectez-vous afin d'appliquer le changement 
    de permissions. Lisez la note ci-dessous avant.

		```bash
		# Copy the default rules. This grants permission to the group 'plugdev'
		sudo cp ~/.arduino15/packages/AZ3166/tools/openocd/0.10.0/linux/contrib/60-openocd.rules /etc/udev/rules.d/
		sudo udevadm control --reload-rules
		
		# Add yourself to the group 'plugdev'
		# Logout and log back in for the group to take effect
		sudo usermod -a -G plugdev $(whoami)
		```

> Vous Ãªtes sous Ubuntu ? Cette derniÃ¨re Ã©tape est Ã  rÃ©aliser Ã  la fin de cette partie. En effet, le dossier 
`packages/AZ3166` est crÃ©Ã© lors d'une prochaine Ã©tape.

Une fois l'ensemble de ces composants installÃ©s, il faudra s'assurer que Visual Studio Code puisse utiliser l'installation
d'Arduino. Ouvrir **File > Preference > Settings** et faites une recherche sur "Arduino". Vous verrez alors
un bouton vous permettant d'Ã©diter les URLs additionnelles dans le fichier `settings.json`.
Il suffit alors d'ajouter les lignes ci-dessous Ã  votre configuration.

::: tip Note
Il est Ã©galement possible d'ouvrir directement les settings avec l'Ã©diteur JSON en utilisant la commande
`Preferences: Open Settings (JSON)`.
:::

![Configurer Arduino path](./img/new-settings.png)

Voici les valeurs par dÃ©faut Ã  ajouter Ã  cette configuration:

* Windows

```JSON
"arduino.path": "C:\\Program Files (x86)\\Arduino",
"arduino.additionalUrls": "https://raw.githubusercontent.com/VSChina/azureiotdevkit_tools/master/package_azureboard_index.json"
```

* macOS

```JSON
"arduino.path": "/Applications",
"arduino.additionalUrls": "https://raw.githubusercontent.com/VSChina/azureiotdevkit_tools/master/package_azureboard_index.json"
```

* Ubuntu

```JSON
"arduino.path": "/home/{username}/Downloads/arduino-1.8.5",
"arduino.additionalUrls": "https://raw.githubusercontent.com/VSChina/azureiotdevkit_tools/master/package_azureboard_index.json"
```

**Pensez Ã  sauvegarder vos paramÃ¨tres avant de passer Ã  l'Ã©tape suivante !**

Enfin il faudra ajouter le SDK spÃ©cifique pour la board Arduino MXChip. Pour cela, via la palette de commande (`Ctrl+Shift+P`
 ou `Cmd+Shif+P`), ouvrir la page **Arduino: Board Manager**, et rechercher **AZ3166**, puis installer la version `1.6.0`.

![Installer le SDK MXChip](./img/install-sdk.png)


### Connecter votre board au WiFi

Votre board est normalement dÃ©jÃ  configurÃ©e. Si vous deviez la reconnecter au WiFi, vous trouverez
[les instructions ici](configure-wifi.md).


[arduino]: https://www.arduino.cc
[vscode-csharpext]: https://marketplace.visualstudio.com/items?itemName=ms-vscode.csharp&wt.mc_id=blinkingcompressor-github-chmaneu
[arduino-ide]: https://www.arduino.cc/en/Main/Software
[vscode-iottoolsext]: https://marketplace.visualstudio.com/items?itemName=vsciot-vscode.azure-iot-tools&wt.mc_id=blinkingcompressor-github-chmaneu
[vscode-arduinoext]: https://marketplace.visualstudio.com/items?itemName=vsciot-vscode.vscode-arduino&wt.mc_id=blinkingcompressor-github-chmaneu
[vscode-azureext]: https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-node-azure-pack&wt.mc_id=blinkingcompressor-github-chmaneu